<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Arch Linux 离线安装教程 | 💝 LYGreen 的博客 💖</title>
    <meta name="description" content="给一台没有网的设备安装 Arch Linux">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/lygreen.github.io/assets/style.CCWf2uLJ.css" as="style">
    <link rel="preload stylesheet" href="/lygreen.github.io/vp-icons.css" as="style">
    
    <script type="module" src="/lygreen.github.io/assets/app.YnOadxyG.js"></script>
    <link rel="modulepreload" href="/lygreen.github.io/assets/chunks/theme.DuSEdLAu.js">
    <link rel="modulepreload" href="/lygreen.github.io/assets/chunks/framework.BsbiY6er.js">
    <link rel="modulepreload" href="/lygreen.github.io/assets/posts_arch-linux-offline-install.md.qnKxaXuD.lean.js">
    <script>(function(){const e=localStorage.getItem("data-theme");e!=null?document.documentElement.setAttribute("data-theme",e):window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light")})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div id="layout" data-v-b2e20c86><header data-v-b2e20c86><div id="header" data-v-b2e20c86 data-v-3abc31c3><div class="left" data-v-3abc31c3><a class="block home" href="/lygreen.github.io/" data-v-3abc31c3>首页</a><a class="block article" href="/lygreen.github.io/articles/pages/1" data-v-3abc31c3>文章</a><a class="block category" href="/lygreen.github.io/category/" data-v-3abc31c3>分类</a><a class="block tag" href="/lygreen.github.io/tag/" data-v-3abc31c3>标签</a></div><div class="right" data-v-3abc31c3><button data-v-3abc31c3>切换主题</button><a class="block github" href="https://github.com/LYGreen/lygreen.github.io" target="_blank" data-v-3abc31c3>Github</a></div></div></header><main data-v-b2e20c86><div id="article" data-v-b2e20c86 data-v-5f2e97ce><div class="toc" data-v-5f2e97ce><input type="checkbox" id="toc-toggle" hidden data-v-5f2e97ce><label for="toc-toggle" data-v-5f2e97ce><strong data-v-5f2e97ce>目录</strong></label><hr data-v-5f2e97ce></div><div class="content" data-v-5f2e97ce><div class="content-header" data-v-5f2e97ce><h2 data-v-5f2e97ce>Arch Linux 离线安装教程</h2><p data-v-5f2e97ce>给一台没有网的设备安装 Arch Linux</p><div class="header-elements" data-v-5f2e97ce><div data-v-5f2e97ce>📅创建时间：2024/10/26 00:43:41</div><div data-v-5f2e97ce>🕒修改时间：2025/8/1 20:32:53</div><div data-v-5f2e97ce>📖阅读时间：4 分钟</div></div></div><hr data-v-5f2e97ce><div style="position:relative;" class="content-body" data-v-5f2e97ce><div><h1 id="虚拟机离线安装-arch-linux" tabindex="-1">虚拟机离线安装 Arch Linux <a class="header-anchor" href="#虚拟机离线安装-arch-linux" aria-label="Permalink to &quot;虚拟机离线安装 Arch Linux&quot;">​</a></h1><hr><h2 id="需要准备" tabindex="-1">需要准备： <a class="header-anchor" href="#需要准备" aria-label="Permalink to &quot;需要准备：&quot;">​</a></h2><ul><li><p>可联网并使用 pacman 的 Arch Linux ( 可以是 Live 环境 )</p></li><li><p>虚拟机 ( VMware 或 VirtualBox )</p></li></ul><hr><h2 id="下载软件包-此处使用虚拟机的-live-环境" tabindex="-1">下载软件包 ( 此处使用虚拟机的 Live 环境 )： <a class="header-anchor" href="#下载软件包-此处使用虚拟机的-live-环境" aria-label="Permalink to &quot;下载软件包 ( 此处使用虚拟机的 Live 环境 )：&quot;">​</a></h2><p>先做好磁盘相关工作 ( lsblk 可以检查磁盘状态 )：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsblk</span></span></code></pre></div><p><img src="/lygreen.github.io/img-arch-linux-offline-install/img1.png" alt=""></p><p>接下来对磁盘进行操作</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda</span></span></code></pre></div><p>出现 Command (m for help): 之后输入 n 创建分区</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Command (m for help):n</span></span></code></pre></div><p>之后一直按回车直到再次出现 Command (m for help): 之后输入 w 进行写入</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Command (m for help):w</span></span></code></pre></div><p>此时输入 lsblk 会出现一个新的分区</p><p><img src="/lygreen.github.io/img-arch-linux-offline-install/img2.png" alt=""></p><p>接下来将 sda1 分区进行格式化</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkfs.ext4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda1</span></span></code></pre></div><p>将该分区挂载到目录 /mnt</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt</span></span></code></pre></div><p>进入到 /mnt 目录，并在该目录创建文件夹</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/var/lib/pacman/sync</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/var/cache/pacman/pkg</span></span></code></pre></div><p>下载存储库 ( 由于该目录挂载的是 sda1 分区，所以下载之后会保存在磁盘当中 )</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cachedir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/var/lib/pacman/pkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Sy</span></span></code></pre></div><p>下载软件包，此处为下载 base, linux, linux-firmware, grub, vim, dhcpcd 包，如果有需要其他的包可以在后面进行添加 ( Live 镜像里的包可以在此处看到 <a href="https://geo.mirror.pkgbuild.com/iso/latest/arch/pkglist.x86_64.txt" target="_blank" rel="noreferrer">pkglist.x86_64.txt</a> )</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cachedir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/var/cache/pacman/pkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Sw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> base</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux-firmware</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> grub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dhcpcd</span></span></code></pre></div><p>下载好之后进行压缩</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -czvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> var</span></span></code></pre></div><p>接下来可以用 pscp 等工具将该压缩包进行复制到当前计算机 ( 此处以 pscp 为例，将文件复制到 pscp 根目录 )</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pscp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@192.168.x.x:/mnt/packages.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><p>若在连接的过程中提示需要密码，则可以先在 Arch Linux 创建一个密码</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">passwd</span></span></code></pre></div><p><img src="/lygreen.github.io/img-arch-linux-offline-install/img3.png" alt=""></p><p>该虚拟机可以作废了</p><hr><h2 id="安装软件包-此处新建了一个-arch-linux-虚拟机" tabindex="-1">安装软件包 ( 此处新建了一个 Arch Linux 虚拟机 ) <a class="header-anchor" href="#安装软件包-此处新建了一个-arch-linux-虚拟机" aria-label="Permalink to &quot;安装软件包 ( 此处新建了一个 Arch Linux 虚拟机 )&quot;">​</a></h2><h3 id="安装系统" tabindex="-1">安装系统 <a class="header-anchor" href="#安装系统" aria-label="Permalink to &quot;安装系统&quot;">​</a></h3><p>和刚才一样，先将磁盘进行分区，格式化</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda</span></span></code></pre></div><p>fdisk 命令( 新建分区，写入 )</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Command (m for help):n</span></span>
<span class="line"><span>Command (m for help):w</span></span></code></pre></div><p>格式化，挂载，进入到该目录</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkfs.ext4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt</span></span></code></pre></div><p>然后进行局域网传输 ( 或其他可行的方法 )，在当前计算机开启一个网页服务器 ( 可用 nginx, Visual Studio Code 的 Live Server 等 )，在 Arch Linux 里面根据当前计算机的 <strong>ip</strong>，<strong>端口</strong> 和 <strong>文件路径</strong> 输入命令，把当前计算机的 packages.tar.gz 文件传输到虚拟机里</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.x.x:xx/path/to/packages.tar.gz</span></span></code></pre></div><p>解压</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xzvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages.tar.gz</span></span></code></pre></div><p>此时可以输入 ls 检查当前目录</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span></span></code></pre></div><p><img src="/lygreen.github.io/img-arch-linux-offline-install/img4.png" alt=""></p><p>接下来进行安装 ( 设置 /mnt 目录为根，软件包为 /mnt/var/cache/pacman/pkg )</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cachedir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/var/cache/pacman/pkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> base</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux-firmware</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> grub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dhcpcd</span></span></code></pre></div><p>之后一直默认，进行安装</p><p><img src="/lygreen.github.io/img-arch-linux-offline-install/img5.png" alt=""></p><p><strong>此处安装过程中会遇到错误如下：</strong></p><p><img src="/lygreen.github.io/img-arch-linux-offline-install/img6.png" alt=""></p><p>因为 /mnt/dev 文件夹是空的，换句话说 /mnt/dev 没有和 Live 环境里的设备 /dev 进行绑定，因此需要进行绑定 ( 挂载虚拟文件系统 )</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --bind</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/dev</span></span></code></pre></div><p>此外，另外2个目录也需要进行绑定</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --bind</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /proc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/proc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --bind</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /sys</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/sys</span></span></code></pre></div><p>再次进行安装</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cachedir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/var/cache/pacman/pkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> base</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux-firmware</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> grub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dhcpcd</span></span></code></pre></div><p>安装完成之后即可进入该系统</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arch-chroot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt</span></span></code></pre></div><h3 id="设置时区" tabindex="-1">设置时区 <a class="header-anchor" href="#设置时区" aria-label="Permalink to &quot;设置时区&quot;">​</a></h3><p>例如设置为上海</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/share/zoneinfo/Asia/Shanghai</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/localtime</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hwclock</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --systohc</span></span></code></pre></div><h3 id="本地化" tabindex="-1">本地化 <a class="header-anchor" href="#本地化" aria-label="Permalink to &quot;本地化&quot;">​</a></h3><p>使用 vim 编辑 /etc/locale.gen，取消注释所需的语言（ 如 en_US.UTF-8 ）:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/locale.gen</span></span></code></pre></div><p>然后生成本地化：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">locale-gen</span></span></code></pre></div><p>设置系统语言：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;LANG=en_US.UTF-8&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/locale.conf</span></span></code></pre></div><h3 id="主机名" tabindex="-1">主机名 <a class="header-anchor" href="#主机名" aria-label="Permalink to &quot;主机名&quot;">​</a></h3><p>设置主机名：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;myhostname&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/hostname</span></span></code></pre></div><p>用 vim 编辑 /etc/hosts ，添加：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>127.0.0.1 localhost</span></span>
<span class="line"><span>::1       localhost</span></span>
<span class="line"><span>127.0.1.1 myhostname.localdomain myhostname</span></span></code></pre></div><h3 id="设置-root-密码" tabindex="-1">设置 root 密码 <a class="header-anchor" href="#设置-root-密码" aria-label="Permalink to &quot;设置 root 密码&quot;">​</a></h3><p><strong>一定要设置密码，否则之后启动系统密码怎么输都不行</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">passwd</span></span></code></pre></div><h3 id="安装-grub-引导加载程序" tabindex="-1">安装 grub ( 引导加载程序 ) <a class="header-anchor" href="#安装-grub-引导加载程序" aria-label="Permalink to &quot;安装 grub ( 引导加载程序 )&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grub-install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --target=i386-pc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grub-mkconfig</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /boot/grub/grub.cfg</span></span></code></pre></div><h3 id="退出-chroot-并重启系统" tabindex="-1">退出 chroot 并重启系统 <a class="header-anchor" href="#退出-chroot-并重启系统" aria-label="Permalink to &quot;退出 chroot 并重启系统&quot;">​</a></h3><p>退出 chroot：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span></span></code></pre></div><p>取消挂载 sda1：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">umount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt</span></span></code></pre></div><p>重启：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reboot</span></span></code></pre></div><hr><h2 id="完成" tabindex="-1">完成 <a class="header-anchor" href="#完成" aria-label="Permalink to &quot;完成&quot;">​</a></h2><p>选择 Arch Linux 即可进入系统</p><p><img src="/lygreen.github.io/img-arch-linux-offline-install/img7.png" alt=""></p><h2 id="解决无网络问题" tabindex="-1">解决无网络问题 <a class="header-anchor" href="#解决无网络问题" aria-label="Permalink to &quot;解决无网络问题&quot;">​</a></h2><p>若启动系统之后没有网络，则需要启动 dhcpcd 服务</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dhcpcd</span></span></code></pre></div><p>设置开机自启动：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dhcpcd</span></span></code></pre></div><hr><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li><a href="https://aquarium39.moe/posts/install-arch-offline/" target="_blank" rel="noreferrer">Arch 离线安装教程</a></li><li><a href="https://chatgpt.com/" target="_blank" rel="noreferrer">ChatGPT</a></li></ul></div></div><hr data-v-5f2e97ce><div class="content-footer" data-v-5f2e97ce><div class="header-elements" data-v-5f2e97ce><div data-v-5f2e97ce>📅创建时间：2024/10/26 00:43:41</div><div data-v-5f2e97ce>🕒修改时间：2025/8/1 20:32:53</div><div data-v-5f2e97ce>📖阅读时间：4 分钟</div></div></div><hr data-v-5f2e97ce><div id="comments" data-v-5f2e97ce></div></div></div></main><footer data-v-b2e20c86><div id="footer" data-v-b2e20c86 data-v-53a3f7a1><hr data-v-53a3f7a1><span data-v-53a3f7a1>版权所有 ©  LYGreen。保留所有权利。</span><span data-v-53a3f7a1>Copyright ©  LYGreen. All rights reserved.</span></div></footer></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"articles_pages_1.md\":\"CtlSSBZb\",\"articles_pages_2.md\":\"BoUbFgHK\",\"category_.md\":\"DZX8TEiF\",\"category_index.md\":\"BLBQ1KE_\",\"category_linux.md\":\"BJAI5kzj\",\"category_知识分享.md\":\"bww8CHmC\",\"category_编程语言.md\":\"BBMgoQy6\",\"index.md\":\"D90TmppQ\",\"page_2.md\":\"D2B4907a\",\"posts_arch-linux-offline-install.md\":\"qnKxaXuD\",\"posts_fast-power.md\":\"BypPpllh\",\"posts_openwrt-wifi-setting.md\":\"C8CY_8U1\",\"posts_writing-hello-world.md\":\"Byn_jwM2\",\"tag_.md\":\"DzrJiEzf\",\"tag_arch linux.md\":\"DEFGdsrQ\",\"tag_c 语言.md\":\"C3xPu3NV\",\"tag_c.md\":\"BaQx5vK6\",\"tag_index.md\":\"O49PcryX\",\"tag_openwrt.md\":\"BhC8U4Yc\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"💝 LYGreen 的博客 💖\",\"description\":\"个人博客\",\"base\":\"/lygreen.github.io/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"data\":\"Hello World\"},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>